{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static "admin/css/forms.css" %}">
{% endblock %}

{% block content %}
    <div id="content-main">
        <h1>Import CSV as a fixture</h1>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="pending_confirm" value="pending">
            <fieldset class="module aligned">
                {% for field in form %}
                    <div class="form-row field-{{ field.name }} {{ field.css_classes }}">
                        <div>
                            <div class="flex-container">
                                {{ field.label_tag  }}
                                {{ field.as_widget }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </fieldset>
            <div class="submit-row">
                <input type="submit" value="{% translate 'Upload CSV' %}">
            </div>
        </form>
        {% if summary %}
            <h2>Resume</h2>
            <p>Processed files: {{ summary.total_rows }}</p>
            <p>Created objects: {{ summary.created }}</p>
            <p>Errors: {{ summary.errors|length }}</p>
            {% if summary.errors %}
                <ul>
                    {% for rownum, msg in summary.errors %}
                        <li>Row {{ rownum }} â€” {{ msg }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endif %}
    </div>

{% endblock %}